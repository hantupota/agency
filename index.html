<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KOSMARA AI - Solusi Website & Chatbot AI 24/7 | Bandung</title>
    <meta name="description" content="Bangun website otomatis dengan AI chatbot yang balas customer 24/7. Hemat waktu, tingkatkan penjualan. Free demo sekarang!">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; scroll-behavior: smooth; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(16px); }
        .chat-container::-webkit-scrollbar { width: 4px; }
        .chat-container::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }
        .animate-bounce-dot { animation: bounce 1s infinite; }
        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }

        @keyframes pulse-shadow { 0%, 100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); } 50% { box-shadow: 0 0 0 8px rgba(37, 99, 235, 0); } }
        .pulse-shadow { animation: pulse-shadow 2s infinite; }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 text-slate-900">

    <!-- NAVIGATION -->
    <nav class="fixed w-full z-50 glass border-b border-slate-200/50 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 h-16 sm:h-20 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-200">
                    <i class="fas fa-robot text-base sm:text-xl"></i>
                </div>
                <span class="text-xl sm:text-2xl font-black tracking-tighter">KOSMARA<span class="text-blue-600">.</span></span>
            </div>
            <a href="https://api.whatsapp.com/send/?phone=6285189134621&text=Halo%20KOSMARA%20Saya%20Mau%20Konsultasi%20Website" 
               class="bg-slate-900 text-white px-4 py-2 sm:px-6 sm:py-2.5 rounded-full font-bold text-xs sm:text-sm hover:bg-blue-600 transition shadow-lg pulse-shadow">
                Konsultasi Gratis
            </a>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <section class="pt-24 sm:pt-32 pb-12 sm:pb-20 px-4 sm:px-6">
        <div class="max-w-4xl mx-auto text-center">
            <div class="inline-block px-3 py-1.5 bg-blue-50 text-blue-600 rounded-full text-[10px] sm:text-xs font-bold uppercase tracking-widest mb-4 sm:mb-6 border border-blue-100">
                ‚ö° AI Agency Solution 2026
            </div>
            <h1 class="text-3xl sm:text-5xl md:text-7xl font-black leading-tight tracking-tight mb-4 sm:mb-8">
                Ubah Chat Menjadi <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">Duit</span> Otomatis.
            </h1>
            <p class="text-base sm:text-xl text-slate-600 leading-relaxed mb-6 sm:mb-10 max-w-2xl mx-auto">
                Website + AI Chatbot yang menjawab customer dalam <span class="font-bold text-blue-600">3 detik</span>, 24/7. Tanpa gaji, tanpa cuti, tanpa drama.
            </p>

            <!-- SOCIAL PROOF -->
            <div class="flex flex-wrap justify-center items-center gap-3 sm:gap-6 mb-6 sm:mb-10 text-xs sm:text-sm text-slate-600">
                <div class="flex items-center gap-1.5">
                    <i class="fas fa-check-circle text-green-500"></i>
                    <span>15+ Bisnis Aktif</span>
                </div>
                <div class="flex items-center gap-1.5">
                    <i class="fas fa-bolt text-yellow-500"></i>
                    <span>Response <2 Detik</span>
                </div>
                <div class="flex items-center gap-1.5">
                    <i class="fas fa-shield-alt text-blue-500"></i>
                    <span>Garansi 30 Hari</span>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row justify-center gap-3 sm:gap-4">
                <button onclick="openChat()" class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 sm:px-10 py-4 sm:py-5 rounded-2xl font-bold text-base sm:text-lg hover:scale-105 transition shadow-2xl shadow-blue-200 pulse-shadow">
                    <i class="fas fa-comments mr-2"></i>Tes Demo Chat AI
                </button>
                <a href="https://api.whatsapp.com/send/?phone=6285189134621&text=Halo%20KOSMARA%20Saya%20Mau%20Konsultasi%20Website" 
                   class="bg-white border-2 border-slate-200 text-slate-900 px-8 sm:px-10 py-4 sm:py-5 rounded-2xl font-bold text-base sm:text-lg hover:bg-slate-50 transition shadow-lg">
                    <i class="fab fa-whatsapp mr-2 text-green-500"></i>Chat WhatsApp
                </a>
            </div>
        </div>
    </section>

    <!-- CHAT INTERFACE -->
    <div id="chat-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-3 sm:p-4 bg-slate-900/50 backdrop-blur-sm">
        <div class="bg-white w-full max-w-lg rounded-3xl sm:rounded-[2.5rem] shadow-2xl flex flex-col h-[90vh] sm:h-[85vh] overflow-hidden border border-white">

            <!-- Header Chat -->
            <div class="bg-gradient-to-r from-slate-900 to-slate-800 text-white p-4 sm:p-6 flex justify-between items-center shrink-0">
                <div class="flex items-center gap-3 sm:gap-4">
                    <div class="relative">
                        <div class="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center border-2 border-white/20 shadow-lg">
                            <i class="fas fa-robot text-base sm:text-xl"></i>
                        </div>
                        <div class="absolute bottom-0 right-0 w-2.5 h-2.5 sm:w-3 sm:h-3 bg-green-500 rounded-full border-2 border-slate-900 animate-pulse"></div>
                    </div>
                    <div>
                        <h4 class="font-bold text-xs sm:text-sm">KOSMARA AI Assistant</h4>
                        <p class="text-[9px] sm:text-[10px] text-slate-400">üü¢ Online 24/7 ‚Ä¢ Response <2 detik</p>
                    </div>
                </div>
                <button onclick="toggleChat()" class="text-slate-400 hover:text-white transition p-2">
                    <i class="fas fa-times text-lg sm:text-xl"></i>
                </button>
            </div>

            <!-- Lead Capture Form (Show First) -->
            <div id="lead-form" class="flex-1 overflow-y-auto p-4 sm:p-6 bg-slate-50 flex items-center justify-center">
                <div class="w-full max-w-sm space-y-4 animate-fade-in">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 mx-auto bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl flex items-center justify-center text-white mb-4 shadow-xl shadow-blue-200">
                            <i class="fas fa-user-circle text-3xl"></i>
                        </div>
                        <h3 class="text-lg sm:text-xl font-bold text-slate-900 mb-2">Kenalan Dulu, Yuk!</h3>
                        <p class="text-xs sm:text-sm text-slate-600">Biar AI kami bisa kasih solusi yang pas untuk bisnis kamu.</p>
                    </div>

                    <input id="lead-name" type="text" placeholder="Nama kamu..." 
                           class="w-full bg-white border-2 border-slate-200 rounded-xl px-4 py-3.5 text-sm focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-100 transition">

                    <input id="lead-business" type="text" placeholder="Bidang bisnis (contoh: Fashion, F&B, Jasa)..." 
                           class="w-full bg-white border-2 border-slate-200 rounded-xl px-4 py-3.5 text-sm focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-100 transition">

                    <input id="lead-whatsapp" type="tel" placeholder="Nomor WhatsApp (08xx)..." 
                           class="w-full bg-white border-2 border-slate-200 rounded-xl px-4 py-3.5 text-sm focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-100 transition">

                    <button onclick="submitLead()" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-4 rounded-xl font-bold text-sm hover:scale-105 transition shadow-lg shadow-blue-200 pulse-shadow">
                        <i class="fas fa-rocket mr-2"></i>Mulai Chat dengan AI
                    </button>

                    <p class="text-[10px] text-center text-slate-500">
                        <i class="fas fa-lock mr-1"></i>Data kamu aman dan tidak akan disebarkan.
                    </p>
                </div>
            </div>

            <!-- Chat Area (Hidden Initially) -->
            <div id="chat-area" class="hidden flex-1 flex flex-col">
                <div id="chat-content" class="flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 sm:space-y-6 bg-slate-50 chat-container">
                    <!-- Greeting akan di-inject setelah lead submit -->
                </div>

                <!-- Typing Indicator -->
                <div id="typing" class="px-4 sm:px-8 py-2 hidden flex items-center gap-2 text-[10px] text-slate-400 italic">
                    <span class="flex gap-0.5">
                        <span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce-dot"></span>
                        <span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce-dot delay-100"></span>
                        <span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce-dot delay-200"></span>
                    </span>
                    KOSMARA AI sedang mengetik...
                </div>

                <!-- Input Area -->
                <div class="p-4 sm:p-6 bg-white border-t border-slate-100 shrink-0">
                    <div class="flex gap-2 sm:gap-3">
                        <input id="user-input" type="text" placeholder="Ketik pesan kamu..." 
                               class="flex-1 bg-slate-50 border-2 border-slate-200 rounded-xl sm:rounded-2xl px-4 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-100 transition"
                               onkeypress="if(event.key === 'Enter') sendToGemini()">
                        <button id="send-btn" onclick="sendToGemini()" 
                                class="bg-gradient-to-br from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white w-12 h-12 sm:w-14 sm:h-14 rounded-xl sm:rounded-2xl flex items-center justify-center transition shadow-lg shadow-blue-200 active:scale-95 disabled:bg-slate-400">
                            <i class="fas fa-paper-plane text-sm sm:text-base"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- SECURITY WARNING ---
        // ‚ö†Ô∏è JANGAN EXPOSE API KEY DI FRONTEND PRODUCTION!
        // Solusi: Gunakan Firebase Cloud Functions / Vercel Serverless sebagai proxy.
        // Tutorial: https://firebase.google.com/docs/functions

        const apiKey = "AIzaSyDCBldq5CTRSwBDHe64Y1XbZrtJj__j_tg"; // GANTI dengan proxy endpoint di production

        let userData = {
            name: "",
            business: "",
            whatsapp: ""
        };

        // --- SYSTEM PROMPT (OPTIMIZED) ---
        const systemInstruction = \`
IDENTITAS:
Anda adalah **AI Sales Specialist dari KOSMARA**, agensi yang membangun Website + Chatbot AI untuk UMKM & startup di Indonesia.

LAYANAN INTI:
1. Website Landing Page (Konversi Tinggi)
2. AI Chatbot 24/7 (Balas Customer Otomatis)
3. WhatsApp Integration (Auto-Response)
4. Dashboard Analytics (Track Konversi)

PROTOKOL KOMUNIKASI:
‚úÖ Bahasa: Indonesia casual-profesional (seperti bicara ke teman bisnis)
‚úÖ Format: Singkat (2-3 kalimat), gunakan **bold** untuk poin penting
‚úÖ Emoji: Pakai 1-2 emoji per respon (üöÄüí°‚ú®) untuk warmth
‚úÖ Call-to-Action: Setiap respon HARUS arahkan ke WhatsApp untuk closing

FLOW CONVERSATION:
1. PAHAMI PROBLEM: Tanya pain point user (capek balas chat? Sepi order? Kompetitor lebih maju?)
2. SOLUSI SPESIFIK: Tawarkan solusi berdasarkan bisnis mereka (jangan generik!)
3. PROOF: Sebut hasil real (contoh: "Klien kami di bidang Fashion naik 40% konversi dalam 2 minggu")
4. URGENCY: Tambahkan scarcity ("Slot konsultasi gratis tinggal 3 minggu ini")
5. CTA: Tutup dengan link WhatsApp

ATURAN KETAT:
‚ùå JANGAN ngobrol panjang tanpa arah
‚ùå JANGAN jawab pertanyaan teknis detail (arahkan ke konsultasi)
‚ùå JANGAN kasih harga exact (bilang "mulai dari Rp 2jt, tergantung kebutuhan")
‚úÖ SELALU qualify lead (budget ready? Timeline urgent?)
‚úÖ SELALU closing dengan WhatsApp link

LINK WHATSAPP:
https://api.whatsapp.com/send/?phone=6285189134621&text=Halo%20KOSMARA%20Saya%20{USER_NAME}%20dari%20bisnis%20{USER_BUSINESS}

CONTOH RESPON (AFTER GREETING):
User: "Bisnis gue sepi, gimana?"
AI: "Sepi biasanya karena customer nggak tahu **value produk kamu** atau **susah dihubungi**. üöÄ Website dengan AI chatbot bisa jawab pertanyaan mereka 24/7, otomatis. Klien kami di bidang F&B naik 3x inquiry setelah pakai sistem ini. Mau bahas strategi spesifik untuk bisnis kamu? [Klik sini chat langsung](LINK_WHATSAPP)"
\`;

        // --- LEAD CAPTURE ---
        function submitLead() {
            const name = document.getElementById('lead-name').value.trim();
            const business = document.getElementById('lead-business').value.trim();
            const whatsapp = document.getElementById('lead-whatsapp').value.trim();

            if (!name || !business) {
                alert('Mohon isi Nama dan Bidang Bisnis ya! üòä');
                return;
            }

            userData = { name, business, whatsapp };

            // Hide form, show chat
            document.getElementById('lead-form').classList.add('hidden');
            document.getElementById('chat-area').classList.remove('hidden');

            // Send to Google Sheets (optional - tambahkan nanti)
            // logLeadToSheet(userData);

            // Greeting dengan nama user
            const greeting = \`
Halo **\${name}**! üëã Senang kenal sama kamu.

Saya lihat kamu bergerak di bidang **\${business}**. Keren! üöÄ

Boleh cerita, apa tantangan terbesar yang kamu hadapi sekarang di bisnis ini? (Contoh: Sepi order, capek balas chat, atau kompetitor lebih maju?)
            \`.trim();

            showAIMessage(greeting);
        }

        function showAIMessage(text) {
            const box = document.getElementById('chat-content');
            box.innerHTML += \`
                <div class="flex gap-3 animate-fade-in">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center text-white text-xs shrink-0 mt-1 shadow-lg">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="bg-white border border-slate-200 p-3 sm:p-4 rounded-2xl rounded-tl-none shadow-sm text-xs sm:text-sm text-slate-700 leading-relaxed max-w-[85%]">
                        \${formatMessage(text)}
                    </div>
                </div>
            \`;
            box.scrollTop = box.scrollHeight;
        }

        function showUserMessage(text) {
            const box = document.getElementById('chat-content');
            box.innerHTML += \`
                <div class="flex gap-3 justify-end animate-fade-in">
                    <div class="bg-gradient-to-br from-blue-600 to-blue-700 text-white p-3 sm:p-4 rounded-2xl rounded-tr-none shadow-md text-xs sm:text-sm leading-relaxed max-w-[85%]">
                        \${text}
                    </div>
                </div>
            \`;
            box.scrollTop = box.scrollHeight;
        }

        // --- FORMAT MESSAGE ---
        function formatMessage(text) {
            let formatted = text
                .replace(/\*\*(.*?)\*\*/g, '<b class="text-slate-900">$1</b>')
                .replace(/\n/g, '<br>');

            // Replace WhatsApp link dengan user data
            const waLink = \`https://api.whatsapp.com/send/?phone=6285189134621&text=Halo%20KOSMARA%20Saya%20\${encodeURIComponent(userData.name)}%20dari%20bisnis%20\${encodeURIComponent(userData.business)}\`;

            formatted = formatted.replace(
                /(https:\/\/api\.whatsapp\.com[^\s<]+)/g,
                \`<a href="\${waLink}" target="_blank" class="inline-block mt-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full text-xs font-bold transition shadow-lg"><i class="fab fa-whatsapp mr-1"></i>Chat via WhatsApp</a>\`
            );

            return formatted;
        }

        // --- SEND TO GEMINI ---
        async function sendToGemini() {
            const input = document.getElementById('user-input');
            const btn = document.getElementById('send-btn');
            const typeIndicator = document.getElementById('typing');
            const userText = input.value.trim();

            if (!userText) return;

            input.disabled = true;
            btn.disabled = true;

            showUserMessage(userText);
            input.value = '';
            typeIndicator.classList.remove('hidden');

            try {
                const response = await fetch(\`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=\${apiKey}\`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            role: "user",
                            parts: [{ text: \`User Data: Nama=\${userData.name}, Bisnis=\${userData.business}, WhatsApp=\${userData.whatsapp}\n\nPesan User: \${userText}\` }]
                        }],
                        systemInstruction: {
                            parts: [{ text: systemInstruction }]
                        },
                        generationConfig: {
                            temperature: 0.8,
                            maxOutputTokens: 300
                        }
                    })
                });

                const data = await response.json();
                let aiText = data.candidates?.[0]?.content?.parts?.[0]?.text;

                if (!aiText) {
                    aiText = "Maaf, koneksi ke AI sedang sibuk. **Langsung chat kami via WhatsApp** untuk respon cepat! üöÄ";
                }

                typeIndicator.classList.add('hidden');
                showAIMessage(aiText);

            } catch (err) {
                console.error(err);
                typeIndicator.classList.add('hidden');
                showAIMessage("Gagal terhubung. Silakan **refresh halaman** atau langsung via WhatsApp.");
            } finally {
                input.disabled = false;
                btn.disabled = false;
                input.focus();
            }
        }

        // --- TOGGLE CHAT ---
        function openChat() {
            const modal = document.getElementById('chat-modal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.getElementById('lead-name').focus();
        }

        function toggleChat() {
            const modal = document.getElementById('chat-modal');
            if (modal.classList.contains('hidden')) {
                openChat();
            } else {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
        }

        // --- ANALYTICS (Optional - integrate later) ---
        function trackEvent(eventName, data) {
            // Google Analytics 4 / Facebook Pixel
            console.log('Event:', eventName, data);
            // gtag('event', eventName, data);
        }

        // Track chat opened
        document.addEventListener('DOMContentLoaded', () => {
            const chatBtn = document.querySelector('[onclick="openChat()"]');
            if (chatBtn) {
                chatBtn.addEventListener('click', () => trackEvent('chat_opened', {}));
            }
        });
    </script>
</body>
</html>
