<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KOSMARA | AI Agency Solution 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
        .chat-container { height: 400px; overflow-y: auto; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .message { animation: fadeIn 0.3s ease forwards; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">

    <!-- Header -->
    <nav class="fixed w-full z-50 glass border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-800 tracking-tighter text-blue-600">KOSMARA <span class="text-gray-400 text-sm font-normal">2026</span></h1>
            <a href="https://wa.me/628123456789" class="bg-green-500 hover:bg-green-600 text-white px-5 py-2 rounded-full font-semibold transition text-sm">Konsultasi Gratis</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-32 pb-20 px-6">
        <div class="max-w-4xl mx-auto text-center">
            <span class="bg-blue-100 text-blue-600 px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest">Masa Depan Bisnis Indonesia</span>
            <h2 class="text-5xl md:text-6xl font-800 mt-6 leading-tight">Bangun Website Otomatis Dengan <span class="text-blue-600">Chatbot AI 24/7.</span></h2>
            <p class="mt-6 text-lg text-gray-600">Hemat waktu, kurangi biaya admin, dan tingkatkan penjualan saat Anda tidur. KOSMARA bikin bisnis Anda jadi otomatis dalam 7 hari.</p>
        </div>
    </section>

    <!-- Chatbot Widget UI -->
    <div id="chat-widget" class="fixed bottom-6 right-6 w-full max-w-md glass border border-gray-200 rounded-2xl shadow-2xl z-50 overflow-hidden hidden md:block">
        <div class="bg-blue-600 p-4 text-white flex justify-between items-center">
            <div>
                <p class="font-bold">Asisten AI KOSMARA</p>
                <p class="text-xs opacity-75">Online â€¢ Balas Instan</p>
            </div>
            <button onclick="toggleChat()" class="text-white hover:opacity-50">âœ•</button>
        </div>
        
        <div id="chat-messages" class="chat-container p-4 space-y-4 bg-gray-50">
            <!-- Pesan awal -->
            <div class="message bg-white border border-gray-200 p-3 rounded-2xl rounded-tl-none shadow-sm max-w-[80%]">
                Halo! ðŸ‘‹ Saya asisten AI KOSMARA. Ada yang bisa saya bantu buat bisnis Anda jadi otomatis?
            </div>
        </div>

        <div class="p-4 bg-white border-t border-gray-100 flex gap-2">
            <input type="text" id="user-input" placeholder="Tanya sesuatu..." class="flex-1 bg-gray-100 border-none rounded-full px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none">
            <button onclick="sendMessage()" class="bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Tombol Chat Mobile -->
    <button onclick="toggleChat()" class="fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:scale-110 transition md:hidden">
        ðŸ’¬
    </button>

    <script>
        const apiKey = ""; // Sistem Vercel akan mengisi ini otomatis jika dideploy
        const messagesContainer = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');

        function toggleChat() {
            document.getElementById('chat-widget').classList.toggle('hidden');
        }

        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            // Tampilkan pesan user
            appendMessage(text, 'user');
            userInput.value = '';

            // Loading state
            const loadingId = appendMessage('Sedang mengetik...', 'bot', true);

            try {
                // Panggil Gemini API (Contoh simulasi - Pastikan endpoint API sudah benar saat produksi)
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `Gunakan instruksi sistem ini: [TEMPEL ISI kosmara_system_prompt.txt DI SINI SAAT PRODUKSI]. User bertanya: ${text}` }] }]
                    })
                });

                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;
                
                removeLoading(loadingId);
                appendMessage(aiText, 'bot');
            } catch (error) {
                removeLoading(loadingId);
                appendMessage("Maaf, ada gangguan teknis. Bisa hubungi tim kami via WhatsApp di header?", 'bot');
            }
        }

        function appendMessage(text, sender, isLoading = false) {
            const div = document.createElement('div');
            const id = 'msg-' + Date.now();
            div.id = id;
            div.className = sender === 'user' 
                ? 'message ml-auto bg-blue-600 text-white p-3 rounded-2xl rounded-tr-none shadow-sm max-w-[80%]'
                : 'message mr-auto bg-white border border-gray-200 p-3 rounded-2xl rounded-tl-none shadow-sm max-w-[80%]';
            div.innerText = text;
            messagesContainer.appendChild(div);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            return id;
        }

        function removeLoading(id) {
            const el = document.getElementById(id);
            if (el) el.remove();
        }

        // Enter key support
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>
